<!-- Modal para detalles y edición de cita -->
<div id="modal-detalles-cita" class="fixed inset-0 z-50 hidden" aria-labelledby="modal-title" role="dialog" aria-modal="true">
    <!-- Background overlay -->
    <div class="fixed inset-0 bg-black/30 dark:bg-black/50 transition-opacity" aria-hidden="true"></div>
    
    <!-- Modal container -->
    <div class="fixed inset-0 z-10 w-screen overflow-y-auto">
        <div class="flex min-h-full items-center justify-center p-4">
            <!-- Modal content -->
            <div class="relative flex w-full max-w-2xl flex-col rounded-xl bg-white dark:bg-gray-800 shadow-2xl">
                <!-- Header -->
                <div class="flex items-center justify-between gap-3 p-6 border-b border-gray-200 dark:border-gray-700">
                    <p class="text-gray-900 dark:text-white text-xl font-bold leading-tight tracking-[-0.015em]">Detalles de la Cita</p>
                    <button type="button" id="btn-cerrar-detalles-cita" class="flex size-8 items-center justify-center rounded-full text-gray-500 dark:text-gray-400 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500/50">
                        <span class="material-symbols-outlined text-2xl">close</span>
                    </button>
                </div>

                <!-- Content -->
                <div class="p-6 grid grid-cols-1 md:grid-cols-2 gap-8" id="contenido-detalles-cita">
                    <!-- Patient Information Section -->
                    <div class="flex flex-col gap-4">
                        <h3 class="text-gray-900 dark:text-white text-lg font-bold leading-tight tracking-[-0.015em]">Paciente</h3>
                        
                        <div class="flex items-center gap-4">
                            <div class="text-gray-700 dark:text-gray-200 flex items-center justify-center rounded-lg bg-gray-100 dark:bg-gray-700 shrink-0 size-10">
                                <span class="material-symbols-outlined text-2xl">person</span>
                            </div>
                            <div class="flex-1">
                                <p class="text-gray-500 dark:text-gray-400 text-sm font-normal">Nombre Completo</p>
                                <p class="text-gray-800 dark:text-gray-100 text-base font-medium leading-normal truncate" id="detalle-paciente-nombre">-</p>
                            </div>
                        </div>

                        <div class="flex items-center gap-4">
                            <div class="text-gray-700 dark:text-gray-200 flex items-center justify-center rounded-lg bg-gray-100 dark:bg-gray-700 shrink-0 size-10">
                                <span class="material-symbols-outlined text-2xl">calendar_today</span>
                            </div>
                            <div class="flex-1">
                                <p class="text-gray-500 dark:text-gray-400 text-sm font-normal">Fecha de Nacimiento</p>
                                <p class="text-gray-800 dark:text-gray-100 text-base font-medium leading-normal truncate" id="detalle-paciente-nacimiento">-</p>
                            </div>
                        </div>

                        <div class="flex items-center gap-4">
                            <div class="text-gray-700 dark:text-gray-200 flex items-center justify-center rounded-lg bg-gray-100 dark:bg-gray-700 shrink-0 size-10">
                                <span class="material-symbols-outlined text-2xl">badge</span>
                            </div>
                            <div class="flex-1">
                                <p class="text-gray-500 dark:text-gray-400 text-sm font-normal">Género</p>
                                <p class="text-gray-800 dark:text-gray-100 text-base font-medium leading-normal truncate" id="detalle-paciente-genero">-</p>
                            </div>
                        </div>
                    </div>

                    <!-- Appointment Details Section -->
                    <div class="flex flex-col gap-4">
                        <h3 class="text-gray-900 dark:text-white text-lg font-bold leading-tight tracking-[-0.015em]">Detalles de la Cita</h3>
                        
                        <div class="flex items-center gap-4">
                            <div class="text-gray-700 dark:text-gray-200 flex items-center justify-center rounded-lg bg-gray-100 dark:bg-gray-700 shrink-0 size-10">
                                <span class="material-symbols-outlined text-2xl">calendar_month</span>
                            </div>
                            <div class="flex-1">
                                <p class="text-gray-500 dark:text-gray-400 text-sm font-normal">Fecha</p>
                                <p class="text-gray-800 dark:text-gray-100 text-base font-medium leading-normal" id="detalle-cita-fecha">-</p>
                            </div>
                        </div>

                        <div class="flex items-center gap-4">
                            <div class="text-gray-700 dark:text-gray-200 flex items-center justify-center rounded-lg bg-gray-100 dark:bg-gray-700 shrink-0 size-10">
                                <span class="material-symbols-outlined text-2xl">schedule</span>
                            </div>
                            <div class="flex-1">
                                <p class="text-gray-500 dark:text-gray-400 text-sm font-normal">Hora</p>
                                <p class="text-gray-800 dark:text-gray-100 text-base font-medium leading-normal" id="detalle-cita-hora">-</p>
                            </div>
                        </div>

                        <div class="flex items-center gap-4">
                            <div class="text-gray-700 dark:text-gray-200 flex items-center justify-center rounded-lg bg-gray-100 dark:bg-gray-700 shrink-0 size-10">
                                <span class="material-symbols-outlined text-2xl">timer</span>
                            </div>
                            <div class="flex-1">
                                <p class="text-gray-500 dark:text-gray-400 text-sm font-normal">Duración</p>
                                <p class="text-gray-800 dark:text-gray-100 text-base font-medium leading-normal" id="detalle-cita-duracion">-</p>
                            </div>
                        </div>

                        <div class="flex items-center gap-4">
                            <div class="text-gray-700 dark:text-gray-200 flex items-center justify-center rounded-lg bg-gray-100 dark:bg-gray-700 shrink-0 size-10">
                                <span class="material-symbols-outlined text-2xl">medical_services</span>
                            </div>
                            <div class="flex-1">
                                <p class="text-gray-500 dark:text-gray-400 text-sm font-normal">Estado</p>
                                <span class="inline-flex items-center px-2 py-1 rounded-full text-xs font-medium" id="detalle-cita-estado">-</span>
                            </div>
                        </div>

                        <div class="flex items-start gap-4">
                            <div class="text-gray-700 dark:text-gray-200 flex items-center justify-center rounded-lg bg-gray-100 dark:bg-gray-700 shrink-0 size-10 mt-1">
                                <span class="material-symbols-outlined text-2xl">info</span>
                            </div>
                            <div class="flex-1">
                                <p class="text-gray-500 dark:text-gray-400 text-sm font-normal">Motivo de la Consulta</p>
                                <p class="text-gray-800 dark:text-gray-100 text-base font-medium leading-normal" id="detalle-cita-motivo">-</p>
                            </div>
                        </div>

                        <div class="flex items-start gap-4" id="detalle-notas-container">
                            <div class="text-gray-700 dark:text-gray-200 flex items-center justify-center rounded-lg bg-gray-100 dark:bg-gray-700 shrink-0 size-10 mt-1">
                                <span class="material-symbols-outlined text-2xl">note</span>
                            </div>
                            <div class="flex-1">
                                <p class="text-gray-500 dark:text-gray-400 text-sm font-normal">Notas</p>
                                <p class="text-gray-800 dark:text-gray-100 text-base font-medium leading-normal" id="detalle-cita-notas">-</p>
                            </div>
                        </div>

                        <div class="flex items-start gap-4" id="detalle-cita-cancelacion" style="display:none;">
                            <div class="text-gray-700 dark:text-gray-200 flex items-center justify-center rounded-lg bg-gray-100 dark:bg-gray-700 shrink-0 size-10 mt-1">
                                <span class="material-symbols-outlined text-2xl">cancel</span>
                            </div>
                            <div class="flex-1">
                                <p class="text-gray-500 dark:text-gray-400 text-sm font-normal">Motivo de cancelación</p>
                                <p class="text-gray-800 dark:text-gray-100 text-base font-medium leading-normal" id="detalle-cita-motivo-cancelacion">-</p>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Actions -->
                <div class="p-6 bg-gray-50 dark:bg-gray-900 border-t border-gray-200 dark:border-gray-700 rounded-b-xl">
                    <div id="cancel-reason-panel" class="hidden flex flex-col gap-3 mb-4">
                        <label for="cancel-reason-text" class="text-sm font-semibold text-gray-700 dark:text-gray-300">Motivo de cancelación</label>
                        <textarea id="cancel-reason-text" rows="3" class="w-full rounded-lg border border-gray-300 dark:border-gray-600 bg-white dark:bg-gray-800 px-3 py-2 text-sm text-gray-800 dark:text-gray-100 focus:outline-none focus:ring-2 focus:ring-red-500"></textarea>
                        <p id="cancel-reason-error" class="text-sm text-red-600 hidden"></p>
                        <div class="flex flex-col gap-2 sm:flex-row sm:justify-end">
                            <button type="button" id="btn-cerrar-cancelacion" class="px-4 py-2 rounded-lg border border-gray-300 dark:border-gray-600 text-gray-700 dark:text-gray-200 bg-white dark:bg-gray-800 hover:bg-gray-100 dark:hover:bg-gray-700 text-sm font-semibold">Descartar</button>
                            <button type="button" id="btn-enviar-cancelacion" class="px-4 py-2 rounded-lg bg-red-600 text-white text-sm font-semibold hover:bg-red-700">Enviar cancelación</button>
                        </div>
                    </div>

                    <div class="flex flex-col sm:flex-row-reverse items-center justify-start gap-3">
                        <button type="button" id="btn-confirmar-cita" class="w-full sm:w-auto flex items-center justify-center gap-2 rounded-lg bg-green-600 px-4 py-2.5 text-sm font-semibold text-white hover:bg-green-700 transition-colors focus:outline-none focus:ring-2 focus:ring-green-500/50">
                            <span class="material-symbols-outlined text-base">check_circle</span>
                            <span>Confirmar cita</span>
                        </button>
                        <button type="button" id="btn-cancelar-cita" class="w-full sm:w-auto flex items-center justify-center gap-2 rounded-lg bg-transparent px-4 py-2.5 text-sm font-semibold text-red-600 dark:text-red-500 hover:bg-red-500/10 dark:hover:bg-red-500/20 transition-colors focus:outline-none focus:ring-2 focus:ring-red-500/50">
                            <span class="material-symbols-outlined text-base">cancel</span>
                            <span>Cancelar cita</span>
                        </button>
                        <button type="button" id="btn-cerrar-detalles-footer" class="w-full sm:w-auto sm:mr-auto flex items-center justify-center rounded-lg bg-transparent px-4 py-2.5 text-sm font-semibold text-gray-600 dark:text-gray-300 hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors focus:outline-none focus:ring-2 focus:ring-gray-500/50">
                            Cerrar
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>